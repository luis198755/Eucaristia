@tailwind base;
@tailwind components;
@tailwind utilities;

/* Reading Mode Styles */
.reading-mode {
  /* Apply reading mode styles to content sections */
}

/* Exclude navigation from reading mode styles */
.reading-mode nav,
.reading-mode nav *,
.reading-mode .fixed {
  font-size: inherit !important;
  line-height: inherit !important;
  font-family: inherit !important;
}

/* Reading Mode Navigation - Centrado perfecto */
.reading-mode nav {
  /* Asegurar que la navegación no se vea afectada por elementos flotantes */
  position: relative !important;
  z-index: 60 !important;
}

.reading-mode nav .max-w-6xl {
  /* Centrado perfecto sin interferencias */
  max-width: 72rem !important;
  margin-left: auto !important;
  margin-right: auto !important;
  padding-left: 2rem !important;
  padding-right: 2rem !important;
  /* Asegurar que no haya desplazamientos */
  transform: none !important;
  left: auto !important;
  right: auto !important;
}

.reading-mode nav .flex.items-center.justify-between {
  /* Mantener distribución equilibrada */
  justify-content: space-between !important;
  align-items: center !important;
  width: 100% !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* Asegurar que el logo/marca esté en su posición correcta */
.reading-mode nav .flex.items-center.space-x-3 {
  margin: 0 !important;
  padding: 0 !important;
}

/* Asegurar que los controles de la derecha estén en su posición */
.reading-mode nav .hidden.md\\:flex,
.reading-mode nav .md\\:hidden {
  margin: 0 !important;
  padding: 0 !important;
}

/* Reading Mode Menu Spacing - Posicionamiento independiente */
.reading-mode .table-of-contents {
  left: 1.5rem !important;
  top: 5rem !important;
  /* Asegurar que no interfiera con la navegación */
  z-index: 40 !important;
}

.reading-mode .table-of-contents .w-64 {
  width: 20rem !important;
}

.reading-mode .table-of-contents .max-h-96 {
  max-height: 28rem !important;
}

.reading-mode .table-of-contents .p-3 {
  padding: 1rem !important;
}

.reading-mode .table-of-contents .space-y-1 > * + * {
  margin-top: 0.75rem !important;
}

.reading-mode .table-of-contents .text-sm {
  font-size: 0.95rem !important;
  line-height: 1.5 !important;
}

.reading-mode .table-of-contents .text-xs {
  font-size: 0.8rem !important;
}

/* Botón flotante del menú en modo lectura */
.reading-mode .fixed.right-6.top-20 {
  right: 1.5rem !important;
  top: 5rem !important;
  /* Asegurar que no interfiera con la navegación */
  z-index: 40 !important;
}

.reading-mode section {
  font-size: var(--reading-font-size, 16px) !important;
  line-height: var(--reading-line-height, 1.6) !important;
  font-family: var(--reading-font-family, system-ui) !important;
}

.reading-mode .max-w-6xl,
.reading-mode .max-w-4xl,
.reading-mode .max-w-3xl,
.reading-mode .max-w-2xl {
  max-width: var(--reading-max-width, 800px) !important;
}

.reading-mode section p,
.reading-mode section li,
.reading-mode section blockquote {
  font-size: var(--reading-font-size, 16px) !important;
  line-height: var(--reading-line-height, 1.6) !important;
  font-family: var(--reading-font-family, system-ui) !important;
}

.reading-mode section h1,
.reading-mode section h2,
.reading-mode section h3,
.reading-mode section h4 {
  font-family: var(--reading-font-family, system-ui) !important;
  line-height: calc(var(--reading-line-height, 1.6) * 0.9) !important;
}

/* High Contrast Mode */
.high-contrast {
  --tw-bg-opacity: 1;
  --tw-text-opacity: 1;
}

.high-contrast,
.high-contrast.dark {
  background-color: rgb(255 255 255 / var(--tw-bg-opacity)) !important;
  color: rgb(0 0 0 / var(--tw-text-opacity)) !important;
}

.high-contrast * {
  border-color: rgb(0 0 0 / 0.3) !important;
}

.high-contrast h1,
.high-contrast h2,
.high-contrast h3,
.high-contrast h4,
.high-contrast h5,
.high-contrast h6 {
  color: rgb(0 0 0 / var(--tw-text-opacity)) !important;
  font-weight: 700 !important;
}

.high-contrast p,
.high-contrast li,
.high-contrast span,
.high-contrast div {
  color: rgb(0 0 0 / var(--tw-text-opacity)) !important;
}

.high-contrast button {
  background-color: rgb(0 0 0 / var(--tw-bg-opacity)) !important;
  color: rgb(255 255 255 / var(--tw-text-opacity)) !important;
  border: 2px solid rgb(0 0 0 / var(--tw-border-opacity, 1)) !important;
}

.high-contrast button:hover {
  background-color: rgb(64 64 64 / var(--tw-bg-opacity)) !important;
}

.high-contrast .bg-gray-50,
.high-contrast .bg-gray-100,
.high-contrast .bg-gray-800,
.high-contrast .bg-gray-900 {
  background-color: rgb(240 240 240 / var(--tw-bg-opacity)) !important;
}

/* Exclude navigation from high contrast mode overrides */
.high-contrast nav,
.high-contrast nav *,
.high-contrast .fixed {
  color: inherit !important;
  background-color: inherit !important;
  font-weight: inherit !important;
}

/* Night Mode (Enhanced Dark Mode) */
.night-mode {
  background-color: rgb(15 15 15) !important;
  color: rgb(220 220 220) !important;
}

.night-mode section {
  background-color: rgb(15 15 15) !important;
}

.night-mode .bg-white {
  background-color: rgb(15 15 15) !important;
}

.night-mode .bg-gray-50 {
  background-color: rgb(25 25 25) !important;
}

.night-mode .bg-gray-100 {
  background-color: rgb(30 30 30) !important;
}

.night-mode .bg-gray-800 {
  background-color: rgb(25 25 25) !important;
}

.night-mode .bg-gray-900 {
  background-color: rgb(15 15 15) !important;
}

.night-mode h1,
.night-mode h2,
.night-mode h3,
.night-mode h4,
.night-mode h5,
.night-mode h6 {
  color: rgb(240 240 240) !important;
}

.night-mode p,
.night-mode li,
.night-mode span {
  color: rgb(200 200 200) !important;
}

.night-mode .text-gray-600,
.night-mode .text-gray-500,
.night-mode .text-gray-400 {
  color: rgb(160 160 160) !important;
}

.night-mode .border-gray-200,
.night-mode .border-gray-300 {
  border-color: rgb(60 60 60) !important;
}

.night-mode .border-gray-700,
.night-mode .border-gray-800 {
  border-color: rgb(40 40 40) !important;
}

/* Exclude navigation from night mode overrides */
.night-mode nav,
.night-mode nav *,
.night-mode .fixed {
  background-color: inherit !important;
  color: inherit !important;
}

/* Reading Mode Focus Styles */
.reading-mode {
  scroll-behavior: smooth;
}

.reading-mode section {
  padding-top: 3rem !important;
  padding-bottom: 3rem !important;
}

.reading-mode .max-w-6xl > *,
.reading-mode .max-w-4xl > * {
  margin-left: auto !important;
  margin-right: auto !important;
}

/* Improved readability for reading mode */
.reading-mode section blockquote {
  padding: 1.5rem !important;
  margin: 2rem 0 !important;
  border-left: 4px solid currentColor !important;
  background-color: rgba(0, 0, 0, 0.05) !important;
}

.night-mode section blockquote {
  background-color: rgba(255, 255, 255, 0.05) !important;
}

.reading-mode section ul,
.reading-mode section ol {
  padding-left: 2rem !important;
  margin: 1.5rem 0 !important;
}

.reading-mode section li {
  margin: 0.75rem 0 !important;
}

/* Focus indicators for reading mode */
.reading-mode button:focus,
.reading-mode a:focus {
  outline: 3px solid currentColor !important;
  outline-offset: 2px !important;
}

/* Responsive adjustments for floating buttons */
@media (max-width: 768px) {
  /* Move floating buttons to avoid overlap on mobile */
  .fixed.right-6.top-20,
  .fixed.left-6.top-20,
  .fixed.left-6.top-36 {
    top: 4.5rem !important;
  }
  
  /* Mantener navegación perfectamente centrada en móvil */
  .reading-mode nav .max-w-6xl {
    padding-left: 1rem !important;
    padding-right: 1rem !important;
    margin-left: auto !important;
    margin-right: auto !important;
    /* Asegurar centrado perfecto en móvil */
    width: 100% !important;
    max-width: 100% !important;
  }
  
  .reading-mode nav .flex.items-center.justify-between {
    margin: 0 !important;
    padding: 0 !important;
    width: 100% !important;
  }
  
  /* Adjust table of contents positioning on mobile */
  .reading-mode .table-of-contents {
    left: 1rem !important;
    right: 1rem !important;
    width: calc(100vw - 2rem) !important;
    max-width: 20rem !important;
  }
  
  /* Adjust reading mode button positioning on mobile */
  .reading-mode .reading-mode-menu-button {
    left: 1rem !important;
  }
  
  /* Botón de modo lectura en móvil */
  .reading-mode .fixed.right-6.top-20 {
    right: 1rem !important;
  }
  
  /* Botón de modo lectura en el lado izquierdo en móvil */
  .reading-mode .fixed.left-6.top-36 {
    left: 1rem !important;
    top: 4.5rem !important;
  }
}

/* Print styles for reading mode */
@media print {
  .reading-mode {
    font-size: 12pt !important;
    line-height: 1.5 !important;
    color: black !important;
    background: white !important;
  }
  
  .reading-mode * {
    color: black !important;
    background: white !important;
  }
}